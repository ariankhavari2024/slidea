<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    {# CSRF Token Meta Tag #}
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>{% block title %}SlideaAI{% endblock %}</title>

    {# Link CSS using url_for #}
    <link href="{{ url_for('static', filename='css/normalize.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ url_for('static', filename='css/webflow.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ url_for('static', filename='css/slidea-ai-ui.webflow.css') }}" rel="stylesheet" type="text/css">
    {# Include Bootstrap CSS for Alert Dismissal #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    {# Fonts #}
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Be Vietnam Pro:regular,500,600"]  }});</script>
    <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>

    {# Favicons #}
    <link href="{{ url_for('static', filename='images/custom_favicon.png') }}" rel="shortcut icon" type="image/x-icon">
    <link href="{{ url_for('static', filename='images/custom_favicon.png') }}" rel="apple-touch-icon">

    {# Base Styles & Navbar/Credit Styles (Moved here for global application) #}
    <style>
      :root {
        /* Define base colors if needed, or rely on Webflow CSS */
        --theme-bg: #090911; /* Example from index */
        --theme-text-secondary: #a8aaaf; /* Example */
        --theme-text-primary: #FFFFFF; /* Example */
        /* Credit Colors */
        --credit-color: #facc15; /* Yellow-500 */
        --credit-glow-color: rgba(250, 204, 21, 0.5); /* Yellow-400 with opacity */
        --border-radius-small: 0.375rem; /* 6px */
      }
      body {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        background-color: var(--theme-bg); /* Use a base background */
        color: var(--theme-text-secondary); /* Default text color */
        font-family: "Be Vietnam Pro", sans-serif; /* Default font */
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      body.loaded {
          opacity: 1;
      }
      main.flex-grow-1 {
          flex-grow: 1;
      }
      /* Navbar Styles */
      .navbar.w-nav { background-color: transparent !important; box-shadow: none !important; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-top: 1rem; padding-bottom: 1rem; }
      .navbar .button-stroke { background-image: none; border: 1px solid var(--theme-text-secondary); padding: 1px; transition: all 0.2s ease; border-radius: var(--border-radius-small); }
      .navbar .button-stroke .button { background-color: transparent; padding: 0.5rem 1rem !important; font-size: 0.9rem !important; color: var(--theme-text-secondary); transition: all 0.2s ease; border-radius: var(--border-radius-small); }
      .navbar .button-stroke:hover { border-color: var(--theme-text-primary); }
      .navbar .button-stroke:hover .button { background-color: rgba(255, 255, 255, 0.1); color: var(--theme-text-primary); }
      .navbar .button-stroke .button img { display: none; } /* Hide original button bg image */
      .navbar .nav-link { color: var(--theme-text-secondary) !important; transition: color 0.2s ease; padding: 0.625rem 1rem; font-weight: 500; line-height: 1rem; }
      .navbar .nav-link:hover, .navbar .nav-link.w--current { color: var(--theme-text-primary) !important; }
      .nav-brand-logo { max-height: 35px; } /* Adjust logo size */
      .nav-container { max-width: 1140px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; width: 100%; padding-left: 1.5rem; padding-right: 1.5rem; } /* Standard padding */
      .nav-menu { display: flex; align-items: center; gap: 0.5rem; }
      .nav-button-wrapper { display: flex; align-items: center; gap: 0.75rem; } /* Desktop button spacing */
      .nav-menu-button { display: none; cursor: pointer; padding: 10px; } /* Hide hamburger by default */
      .nav-menu-line { width: 24px; height: 2px; background-color: #fff; margin: 4px 0; display: block; transition: transform 0.3s ease; }
      .nav-menu-button.w--open .nav-menu-line.top { transform: translateY(6px) rotate(45deg); }
      .nav-menu-button.w--open .nav-menu-line.middle { opacity: 0; }
      .nav-menu-button.w--open .nav-menu-line.last { transform: translateY(-6px) rotate(-45deg); }

      /* Credit Display Style */
      .nav-credits {
          color: var(--credit-color) !important; /* Yellow text */
          margin-left: 0.5rem; /* Adjust spacing as needed */
          margin-right: 0.5rem;
          font-size: 0.9em;
          font-weight: 600;
          display: inline-flex;
          align-items: center;
          padding: 0.375rem 0.75rem;
          line-height: 1;
          text-shadow: 0 0 8px var(--credit-glow-color); /* Yellow glow */
          white-space: nowrap;
      }
      .nav-credits svg {
          width: 1em; height: 1em; margin-right: 0.4em;
          fill: currentColor; vertical-align: -0.1em;
          filter: drop-shadow(0 0 3px var(--credit-glow-color));
      }
      /* Alert styling (Bootstrap compatible) */
      .alert { padding: 0.75rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: .375rem; width: 100%; box-sizing: border-box; font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 1056; } /* Increased z-index */
      .alert-danger { color: #842029 !important; background-color: #f8d7da !important; border-color: #f5c2c7 !important; }
      .alert-success { color: #0f5132 !important; background-color: #d1e7dd !important; border-color: #badbcc !important; }
      .alert-warning { color: #664d03 !important; background-color: #fff3cd !important; border-color: #ffecb5 !important; }
      .alert-info { color: #055160 !important; background-color: #cff4fc !important; border-color: #b6effb !important; }
      .alert .btn-close { padding: 0.5rem 0.75rem; background: transparent; border: 0; opacity: 0.7; filter: invert(1) grayscale(100%) brightness(200%); }
      #flash-message-container { position: fixed; top: 5rem; left: 50%; transform: translateX(-50%); z-index: 1060; width: 90%; max-width: 600px;} /* Centered Flash */

      /* Mobile Menu Styles */
      @media screen and (max-width: 991px) {
        .nav-menu { display: none; position: absolute; top: 100%; left: 0; right: 0; background: #13131b; padding: 1rem; flex-direction: column; gap: 0.5rem; border-bottom-left-radius: .75rem; border-bottom-right-radius: .75rem; box-shadow: 0 8px 15px rgba(0,0,0,0.2);}
        .nav-menu.w--open { display: flex; } /* Class Webflow might use */
        .nav-button-wrapper.hide-tablet { display: none; } /* Hide desktop buttons */
        .nav-button-wrapper.hide-desktop { display: flex; flex-direction: column; gap: 0.5rem; width: 100%; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .nav-button-wrapper.hide-desktop .button-stroke { width: 100%; text-align: center; margin-left: 0 !important;}
        .nav-menu-button { display: block; } /* Show hamburger */
        .nav-container { padding-left: 1rem; padding-right: 1rem; } /* Reduce padding on smaller screens */
      }
    </style>

    {% block head_extra %}{% endblock %} {# For page-specific CSS/scripts in head #}

</head>
<body class="body-fade-in"> {# Add class for JS hook #}
  <div class="page-wrapper">

    {# *** INCLUDE NAVBAR PARTIAL *** #}
    {% include "_navbar.html" %}

    {# Container for Flash Messages #}
    <div id="flash-message-container" class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    {# Main Content Block #}
    <main class="flex-grow-1"> {# Use Bootstrap class to make main content grow #}
        {% block content %}{% endblock %}
    </main>

    {# *** FOOTER REMOVED *** #}

  </div>{# End page-wrapper #}
  {# <div class="w-embed"></div> #} {# Optional Webflow embed div #}

  {# JS Includes #}
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=67f1d16c9fcb04b14e6074f2" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/webflow.js') }}" type="text/javascript"></script>
  {# Bootstrap JS for alert dismissal #}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  {# Base JS (Fade-in, Alert Dismissal, Navbar Toggle) #}
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Apply fade-in effect after DOM is loaded
      document.body.classList.add('loaded');

      // Optional fade-out on link click
      const links = document.querySelectorAll('a:not([target="_blank"]):not([href^="#"]):not(.w-tab-link):not(.w-dropdown-toggle)'); // Exclude specific Webflow classes
      links.forEach(link => {
        link.addEventListener('click', function(e) {
          const href = this.getAttribute('href');
          // Ensure it's not inside a form we want to submit normally
          if (href && !href.startsWith('mailto:') && !href.startsWith('tel:') && !this.closest('form')) {
             e.preventDefault();
             document.body.style.opacity = 0;
             setTimeout(() => { window.location.href = href; }, 500); // Match CSS transition duration
          }
        });
      });

       // JS to dismiss flash messages (uses Bootstrap JS now)
       const alertContainer = document.getElementById('flash-message-container');
       if (alertContainer) {
           const alerts = alertContainer.querySelectorAll('.alert');
           alerts.forEach(function(alert) {
               setTimeout(() => {
                   if (typeof bootstrap !== 'undefined' && bootstrap.Alert) {
                       const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
                       if (bsAlert) { bsAlert.close(); }
                   } else { // Fallback
                       alert.style.opacity = '0'; setTimeout(() => alert.remove(), 150);
                   }
               }, 5000); // 5 seconds
           });
       }

       // Navbar toggle logic (Basic example, adapt if using Webflow's JS)
       // This targets the elements defined in _navbar.html
       const menuButton = document.querySelector('.nav-menu-button');
       const navMenu = document.querySelector('.nav-menu.w-nav-menu');
       if (menuButton && navMenu) {
           menuButton.addEventListener('click', function() {
               // Toggle classes for Webflow compatibility (or your custom JS logic)
               menuButton.classList.toggle('w--open');
               navMenu.classList.toggle('w--open'); // Assumes Webflow uses w--open
           });
       }
    });
  </script>

  {% block scripts %}{% endblock %} {# For page-specific JS #}

</body>
</html>
