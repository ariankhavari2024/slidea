<!DOCTYPE html>
<html data-wf-page="67f1d16c9fcb04b14e60753A" data-wf-site="67f1d16c9fcb04b14e6074f2"> {# Example page ID #}
<head>
  <meta charset="utf-8">
  <title>Create New Presentation - SlideaAI</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <meta name="csrf-token" content="{{ csrf_token() }}">

  {# Link CSS - Relying on these for base navbar styles #}
  <link href="{{ url_for('static', filename='css/normalize.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/webflow.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/slidea-ai-ui.webflow.css') }}" rel="stylesheet" type="text/css">
  {# Bootstrap for Alerts #}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


  {# Fonts #}
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Be Vietnam Pro:regular,500,600"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>

  {# Favicons #}
  <link href="{{ url_for('static', filename='images/custom_favicon.png') }}" rel="shortcut icon" type="image/x-icon">
  <link href="{{ url_for('static', filename='images/custom_favicon.png') }}" rel="apple-touch-icon">

  {# Custom CSS for Create Page ONLY #}
  <style>
    :root {
        /* Enhanced Theme Colors */
        --theme-bg: #090911; /* Correct background */
        --theme-card-bg: #1E293B; /* Dark slate */
        --theme-card-border: rgba(71, 85, 105, 0.4); /* Slate border */
        --theme-card-hover-bg: #334155; /* Lighter slate on hover */
        --theme-text-primary: #F1F5F9; /* Off-white */
        --theme-text-secondary: #94A3B8; /* Lighter grey */
        --theme-heading-gradient: linear-gradient(180deg, #FFFFFF, #E2E8F0);
        --theme-button-gradient: linear-gradient(90deg, #8B5CF6, #EC4899); /* Vibrant Purple to Pink */
        --theme-button-hover-gradient: linear-gradient(90deg, #A78BFA, #F472B6); /* Lighter on hover */
        --theme-input-bg: #0F172A; /* Match background */
        --theme-input-border: #475569; /* Slate border */
        --theme-input-focus-border: #8B5CF6; /* Vibrant Purple focus */
        --theme-widget-selected-border: #8B5CF6; /* Vibrant Purple border for selected widget */
        --theme-widget-icon-color: #A78BFA; /* Lighter purple for icons */
        --theme-danger: #F43F5E; /* Rose color for errors */
        --theme-success: #10B981; /* Emerald for success */
        --theme-button-action: #5865F2; /* Discord-like blue for Edit */
        --theme-button-action-hover: #4752C4;
        --theme-slider-track: #475569; /* Slider track color */
        --theme-slider-thumb: #8B5CF6; /* Slider thumb color */
        --theme-slider-thumb-hover: #A78BFA;
        --border-radius-base: 0.75rem; /* 12px */
        --border-radius-small: 0.375rem; /* 6px */
        --select-arrow-color: var(--theme-text-secondary); /* Color for the select arrow */
        --credit-color: #facc15; /* Yellow-500 */
        --credit-glow-color: rgba(250, 204, 21, 0.5); /* Yellow-400 with opacity */
    }
    body {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        background-color: var(--theme-bg); /* Use correct bg */
        color: var(--theme-text-secondary);
        font-family: "Be Vietnam Pro", sans-serif;
    }
    body.loaded { opacity: 1; }

    /* Credit Display Style (Keep if not global) */
    .nav-credits {
        color: var(--credit-color) !important;
        margin-left: 0.5rem;
        margin-right: 0.5rem;
        font-size: 0.8em;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        padding: 0.3rem 0.6rem;
        line-height: 1;
        text-shadow: 0 0 8px var(--credit-glow-color);
        white-space: nowrap;
    }
    .nav-credits svg {
        width: 0.9em; height: 0.9em;
        margin-right: 0.3em;
        fill: currentColor;
        vertical-align: -0.1em;
        filter: drop-shadow(0 0 3px var(--credit-glow-color));
    }
    /* Ensure spacing between desktop buttons (Keep if not global) */
    /* Rely on Webflow's default spacing for .nav-button-wrapper.hide-tablet */
     .nav-button-wrapper.hide-tablet {
        display: flex;
        align-items: center;
        gap: 0.75rem; /* Adjust gap as needed */
    }

    /* Create Page Layout */
    .create-section { padding-top: 3rem; padding-bottom: 5rem; flex-grow: 1; }
    .create-header h1 {
        font-size: 3rem; line-height: 3.5rem; font-weight: 600; margin-bottom: 0.5rem;
        background: var(--theme-heading-gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    }
     .create-header p { font-size: 1.1rem; color: var(--theme-text-secondary); margin-bottom: 2.5rem; }

    /* Form Section Styling */
    .form-section {
        background-color: var(--theme-card-bg); border: 1px solid var(--theme-card-border);
        border-radius: var(--border-radius-base); margin-bottom: 1.5rem;
        padding: 1.5rem 2rem; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.3s ease;
    }
    .form-section:hover { box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25); }
    .form-section-header {
        font-size: 1.25rem; font-weight: 600; color: var(--theme-text-primary);
        margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--theme-card-border);
    }

    /* Input Styling */
    .form-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--theme-text-secondary); }
    .form-text { font-size: 0.8rem; color: var(--theme-text-secondary); opacity: 0.8; margin-top: 0.3rem; }
    .w-input, .w-select, textarea.w-input, .manual-input, textarea.manual-input, input[type="file"].manual-input {
        display: block; width: 100%; padding: 0.75rem 1rem; font-size: 1rem; line-height: 1.5;
        color: var(--theme-text-primary); background-color: var(--theme-input-bg) !important;
        border: 1px solid var(--theme-input-border); border-radius: var(--border-radius-small);
        transition: border-color .2s ease-in-out, box-shadow .2s ease-in-out;
    }
    .w-input:focus, .w-select:focus, textarea.w-input:focus,
    .manual-input:focus, textarea.manual-input:focus, input[type="file"].manual-input:focus,
    input[type="range"].form-range:focus {
        border-color: var(--theme-input-focus-border); outline: 0;
        box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
    }
    .w-input::placeholder, textarea.w-input::placeholder,
    .manual-input::placeholder, textarea.manual-input::placeholder { color: var(--theme-text-secondary); opacity: 0.6; }
    textarea.w-input, textarea.manual-input { height: auto; min-height: 120px; }

    /* Select Dropdown Fix */
    .w-select {
        -webkit-appearance: none; -moz-appearance: none; appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23${'var(--select-arrow-color)'.substring(4).slice(0, -1)}' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3E%3C/svg%3E");
        background-repeat: no-repeat; background-position: right 0.75rem center;
        background-size: 1.25em 1.25em; padding-right: 2.5rem;
    }
    .w-select[multiple] { background-image: none; padding-right: 1rem; }

    /* File Input */
    input[type="file"].manual-input { padding: 0.6rem 1rem; cursor: pointer; color: var(--theme-text-secondary); }
    input[type="file"].manual-input::file-selector-button {
        background: var(--theme-button-action); border: none; padding: 0.4rem 0.8rem;
        border-radius: var(--border-radius-small); color: white; cursor: pointer;
        transition: background-color 0.2s ease; margin-right: 1rem; font-weight: 500;
    }
    input[type="file"].manual-input::file-selector-button:hover { background: var(--theme-button-action-hover); }

    /* Range Slider Styling */
    input[type="range"].form-range {
        height: 0.5rem; padding: 0; background-color: var(--theme-slider-track);
        border-radius: 0.25rem; cursor: pointer; appearance: none; -webkit-appearance: none;
        border: 1px solid var(--theme-input-border); width: 100%;
    }
    input[type="range"].form-range::-webkit-slider-thumb {
        appearance: none; -webkit-appearance: none; width: 1.25rem; height: 1.25rem;
        background-color: var(--theme-slider-thumb); border-radius: 50%; border: none;
        cursor: pointer; margin-top: -0.375rem; transition: background-color 0.2s ease;
    }
    input[type="range"].form-range:hover::-webkit-slider-thumb { background-color: var(--theme-slider-thumb-hover); }
    input[type="range"].form-range:focus::-webkit-slider-thumb { box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.4); }
    input[type="range"].form-range::-moz-range-thumb {
        width: 1.25rem; height: 1.25rem; background-color: var(--theme-slider-thumb);
        border-radius: 50%; border: none; cursor: pointer; transition: background-color 0.2s ease;
    }
     input[type="range"].form-range:hover::-moz-range-thumb { background-color: var(--theme-slider-thumb-hover); }
    input[type="range"].form-range:focus::-moz-range-thumb { box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.4); }
    input[type="range"].form-range::-moz-range-track {
        width: 100%; height: 0.5rem; background-color: var(--theme-slider-track);
        border-radius: 0.25rem; border: none;
    }
    input[type="range"].form-range::-moz-focus-outer { border: 0; }

    /* Creativity Slider Container */
    .creativity-slider-container { display: flex; align-items: center; gap: 1rem; max-width: 400px; }
    .creativity-slider-value {
        font-weight: 600; color: var(--theme-text-primary); background-color: var(--theme-input-bg);
        padding: 0.3rem 0.7rem; border-radius: var(--border-radius-small);
        border: 1px solid var(--theme-input-border); min-width: 40px; text-align: center;
    }

    /* Widget Styling */
    .widget-selection-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
    .option-widget {
        background-color: var(--theme-input-bg); border: 2px solid var(--theme-input-border);
        border-radius: 0.5rem; padding: 1.25rem 1.5rem; cursor: pointer;
        transition: all 0.25s ease-in-out; text-align: center; position: relative;
        display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
    }
    .option-widget:hover {
        background-color: var(--theme-card-hover-bg); border-color: var(--theme-widget-icon-color);
        transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }
    .option-widget.selected {
        border-color: var(--theme-widget-selected-border); background-color: rgba(139, 92, 246, 0.1);
        box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3); transform: translateY(-1px);
    }
    .option-widget .widget-icon {
        width: 32px; height: 32px; margin-bottom: 0.5rem;
        color: var(--theme-widget-icon-color); transition: color 0.2s ease;
    }
     .option-widget:hover .widget-icon { color: var(--theme-text-primary); }
     .option-widget.selected .widget-icon { color: var(--theme-widget-selected-border); }
    .option-widget .widget-title { font-weight: 600; color: var(--theme-text-primary); margin-bottom: 0.25rem; display: block; }
    .option-widget .widget-description { font-size: 0.85rem; color: var(--theme-text-secondary); line-height: 1.3; }
    .option-widget input[type="radio"] { position: absolute; opacity: 0; width: 0; height: 0; top: 10px; left: 10px; }

    /* Theme Preview Widget */
    .theme-widget { padding: 0.5rem; gap: 0.75rem; }
    .theme-preview-image-container {
        width: 100%; aspect-ratio: 3 / 2; background-color: var(--theme-input-bg);
        border-radius: var(--border-radius-small); overflow: hidden;
        margin-bottom: 0.75rem; border: 1px solid var(--theme-input-border);
    }
    .theme-preview-image-container img { display: block; width: 100%; height: 100%; object-fit: cover; }
    .theme-widget .widget-title { font-size: 0.9rem; margin-bottom: 0; }

    /* Mobile Swiper Styles */
    .theme-swiper-container {
        overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 1rem;
        margin-left: -1rem; margin-right: -1rem; padding-left: 1rem; padding-right: 1rem;
    }
    .theme-swiper-container::-webkit-scrollbar { display: none; }
    .theme-swiper-container { scrollbar-width: none; -ms-overflow-style: none; }
    .theme-grid-mobile-swiper { display: flex; flex-wrap: nowrap; gap: 1rem; width: max-content; padding-bottom: 0.5rem; }
    .theme-grid-mobile-swiper .theme-widget { width: 200px; flex-shrink: 0; }

    /* Submit Button */
    .btn-submit-gradient {
        background: var(--theme-button-gradient); color: white; padding: 0.8rem 1.5rem;
        border-radius: 0.5rem; text-decoration: none; display: inline-flex; align-items: center;
        justify-content: center; font-weight: 500; border: none;
        transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); width: 100%; font-size: 1.1rem;
    }
    .btn-submit-gradient:hover {
        background: var(--theme-button-hover-gradient); transform: translateY(-2px) scale(1.01);
        box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
    }
     .btn-submit-gradient:disabled {
        opacity: 0.6; cursor: not-allowed; transform: none;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        background: linear-gradient(90deg, #5f5f7b, #7c7c9a);
     }
     .btn-submit-gradient .spinner-border-sm { width: 1em; height: 1em; margin-left: 0.5em; }

    /* Validation Error Styling */
    .is-invalid { border-color: var(--theme-danger) !important; }
    .invalid-feedback { display: block; width: 100%; margin-top: .25rem; font-size: .875em; color: var(--theme-danger); }
    .text-danger { color: var(--theme-danger) !important; }

    /* Manual Slide Input Styles */
    .manual-slides-container { position: relative; overflow: hidden; min-height: 300px; }
    .manual-slide-input-group {
        border: 1px solid var(--theme-input-border); border-radius: var(--border-radius-small);
        padding: 1.25rem 1.5rem; margin-bottom: 1rem; background-color: rgba(0,0,0,0.1);
        transition: border-color 0.2s ease, opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    }
     .manual-slide-input-group:focus-within { border-color: var(--theme-input-focus-border); }
    .manual-slide-input-group label { font-weight: 500; font-size: 0.9rem; color: var(--theme-text-secondary); margin-bottom: 0.5rem; display: block; }
    .manual-slide-header {
        font-weight: 600; color: var(--theme-text-primary); margin-bottom: 1rem;
        padding-bottom: 0.5rem; border-bottom: 1px solid var(--theme-input-border); font-size: 1.1rem;
    }
    textarea.manual-input { min-height: 80px; }

    /* Manual Slide Navigation */
    .manual-slide-navigation { display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding: 0.5rem 0; }
    .manual-slide-nav-button {
        background-color: var(--theme-input-bg); border: 1px solid var(--theme-input-border);
        color: var(--theme-text-secondary); padding: 0.5rem 1rem; border-radius: var(--border-radius-small);
        cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 0.4rem;
    }
    .manual-slide-nav-button svg { width: 1em; height: 1em; }
    .manual-slide-nav-button:hover:not(:disabled) {
        background-color: var(--theme-card-hover-bg); border-color: var(--theme-text-secondary); color: var(--theme-text-primary);
    }
    .manual-slide-nav-button:disabled { opacity: 0.5; cursor: not-allowed; }
    .slide-indicator { font-size: 0.9rem; font-weight: 500; color: var(--theme-text-secondary); }

    /* Alert Styling */
    .alert {
        padding: 0.8rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent;
        border-radius: var(--border-radius-small); width: 100%; box-sizing: border-box;
        font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center;
        position: relative; z-index: 10; color: var(--theme-text-primary) !important;
    }
    .alert-danger { background-color: rgba(244, 63, 94, 0.2); border-color: rgba(244, 63, 94, 0.4); }
    .alert-success { background-color: rgba(16, 185, 129, 0.2); border-color: rgba(16, 185, 129, 0.4); }
    .alert-warning { background-color: rgba(245, 158, 11, 0.2); border-color: rgba(245, 158, 11, 0.4); }
    .alert-info { background-color: rgba(59, 130, 246, 0.2); border-color: rgba(59, 130, 246, 0.4); }
    .alert .btn-close { padding: 0.5rem 0.75rem; background: transparent; border: 0; opacity: 0.7; filter: invert(1) grayscale(100%) brightness(200%); }

    /* Alpine Transition Helper */
    [x-cloak] { display: none !important; }

    /* Media Query for Mobile Swiper */
    @media (max-width: 767px) { .widget-selection-container.theme-grid { display: none; } .theme-swiper-container { display: block; } }
    @media (min-width: 768px) { .widget-selection-container.theme-grid { display: grid; } .theme-swiper-container { display: none; } }

    /* Mobile Navbar Fixes */
    @media (max-width: 991px) {
        .nav-button-wrapper.hide-tablet { display: none !important; }
        .nav-button-wrapper.hide-desktop {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            gap: 0.5rem !important;
            width: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 1rem;
            margin-bottom: 0;
            justify-content: center;
        }
        .nav-button-wrapper.hide-desktop .button-stroke {
            padding: 0.5rem 0.75rem !important;
            font-size: 0.8rem !important;
            flex: none;
            text-align: center;
            margin-left: 0 !important;
        }
         .nav-button-wrapper.hide-desktop .button-stroke .button {
             padding: 0 !important;
        }
        .nav-button-wrapper.hide-desktop .nav-credits {
            font-size: 0.7em !important;
            padding: 0.2rem 0.4rem !important;
            margin: 0 !important;
            order: -1;
        }
    }

  </style>

</head>
<body class="body-fade-in loaded">
  <div class="page-wrapper">
    <div class="padding-global">
      <div class="container-large">
        <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
          <div class="nav-container"> <a href="{{ url_for('main.index') }}" class="nav-brand-logo-wrapper w-nav-brand">
              <img src="{{ url_for('static', filename='images/Logo_New.png') }}" loading="lazy" alt="SlideaAI Logo" class="nav-brand-logo">
            </a>
            <nav role="navigation" class="nav-menu w-nav-menu">
              <a href="{{ url_for('main.index') }}" class="nav-link w-nav-link {% if request.endpoint == 'main.index' %}w--current{% endif %}">Home</a>
              <a href="{{ url_for('main.about') }}" class="nav-link w-nav-link {% if request.endpoint == 'main.about' %}w--current{% endif %}">About</a>
              <a href="{{ url_for('main.features') }}" class="nav-link w-nav-link {% if request.endpoint == 'main.features' %}w--current{% endif %}">Feature</a>
              <a href="{{ url_for('main.contact') }}" class="nav-link w-nav-link {% if request.endpoint == 'main.contact' %}w--current{% endif %}">Contact</a>
              <a href="{{ url_for('main.pricing') }}" class="nav-link w-nav-link {% if request.endpoint == 'main.pricing' %}w--current{% endif %}">Pricing</a>

              <div class="nav-button-wrapper hide-desktop">
                {% if current_user.is_authenticated %}
                  <span class="nav-credits" title="Remaining Slide Credits">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-coin" viewBox="0 0 16 16"><path d="M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518z"/><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12"/></svg>
                      {{ current_user.credits_remaining }}
                  </span>
                  <a data-wf--button--variant="base" href="{{ url_for('main.dashboard') }}" class="button-stroke w-inline-block"><div class="button"><div class="button-text">Dashboard</div></div></a>
                  <a data-wf--button--variant="base" href="{{ url_for('main.account') }}" class="button-stroke w-inline-block"><div class="button" style="background-color: #333;"><div class="button-text">Account</div></div></a>
                {% else %}
                  <a data-wf--button--variant="base" href="{{ url_for('main.register') }}" class="button-stroke w-inline-block"><div class="button"><div class="button-text">Get started</div></div></a>
                   <a data-wf--button--variant="base" href="{{ url_for('main.login') }}" class="button-stroke w-inline-block"><div class="button" style="background-color: #333;"><div class="button-text">Login</div></div></a>
                {% endif %}
              </div>
            </nav>
            <div class="nav-button-wrapper hide-tablet">
               {% if current_user.is_authenticated %}
                 <span class="nav-credits" title="Remaining Slide Credits">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-coin" viewBox="0 0 16 16"><path d="M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518z"/><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12"/></svg>
                     {{ current_user.credits_remaining }}
                 </span>
                 <a data-wf--button--variant="base" href="{{ url_for('main.dashboard') }}" class="button-stroke w-inline-block"><div class="button"><div class="button-text">Dashboard</div></div></a>
                 <a data-wf--button--variant="base" href="{{ url_for('main.account') }}" class="button-stroke w-inline-block"><div class="button" style="background-color: #333;"><div class="button-text">Account</div></div></a>
               {% else %}
                 <a data-wf--button--variant="base" href="{{ url_for('main.register') }}" class="button-stroke w-inline-block"><div class="button"><div class="button-text">Get started</div></div></a>
                  <a data-wf--button--variant="base" href="{{ url_for('main.login') }}" class="button-stroke w-inline-block" style="margin-left: 10px;"><div class="button" style="background-color: #333;"><div class="button-text">Login</div></div></a>
               {% endif %}
            </div>
            <div data-w-id="0023d2b2-573b-2e35-09d0-c21f6fb8add5" class="nav-menu-button w-nav-button">
              <div class="nav-menu-line-wrapper">
                <div class="nav-menu-line top"></div>
                <div class="nav-menu-line middle"></div>
                <div class="nav-menu-line last"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="main-wrapper">
      <div class="create-section">
        <div class="padding-global">
          <div class="container-large" style="max-width: 960px;">

            <div class="create-header">
                <h1>Create New Presentation</h1>
                <p>Choose your content source, style, and options.</p>
            </div>

             {# Flash Messages #}
             {% with messages = get_flashed_messages(with_categories=true) %}
               {% if messages %}
                 <div style="width: 100%; margin-bottom: 1rem;">
                   {% for category, message in messages %}
                     <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert" style="padding: 0.8rem 1.25rem; border: 1px solid transparent; border-radius: 0.375rem; display: flex; justify-content: space-between; align-items: center;">
                         <span>{{ message }}</span>
                         <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" style="padding: 0.5rem 0.75rem; background: transparent; border: 0; opacity: 0.7; filter: invert(1) grayscale(100%) brightness(200%);"></button>
                     </div>
                   {% endfor %}
                 </div>
               {% endif %}
             {% endwith %}

            {# --- Alpine.js data scope for the form --- #}
            <div x-data="{
                    inputMethod: '{{ request.form.get('input_method_choice', 'auto') }}',
                    textStyle: '{{ form.text_style.data or 'bullet' }}',
                    slideCount: {{ form.slide_count.data or 3 }},
                    creativityValue: {{ form.creativity_score.data or 5 }},
                    styleChoice: '{{ form.style_choice.data or 'keynote_modern' }}',
                    currentManualSlideIndex: 1,
                    get slideIndices() {
                        const count = parseInt(this.slideCount) || 0;
                        return Array.from({ length: Math.max(0, Math.min(count, 50)) }, (_, i) => i + 1);
                    },
                    nextManualSlide() { if (this.currentManualSlideIndex < this.slideIndices.length) { this.currentManualSlideIndex++; } },
                    prevManualSlide() { if (this.currentManualSlideIndex > 1) { this.currentManualSlideIndex--; } }
                 }" x-cloak>
                {# *** ADD enctype for file uploads *** #}
                <form id="create-presentation-form" method="POST" action="{{ url_for('main.create_presentation') }}" novalidate enctype="multipart/form-data">
                    {{ form.hidden_tag() }} {# CSRF protection #}

                    {# --- Step 1: Content Source --- #}
                    <div class="form-section">
                        <div class="form-section-header">Step 1: Content Source</div>
                        <p>How do you want to provide the slide content?</p>
                        <div class="widget-selection-container">
                            <label class="option-widget" :class="{ 'selected': inputMethod === 'auto' }" @click="inputMethod = 'auto'">
                                <input type="radio" name="input_method_choice" id="methodAuto" value="auto" x-model="inputMethod">
                                <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z" /></svg>
                                <span class="widget-title">Automatic Generation</span>
                                <span class="widget-description">Let AI create content from your topic.</span>
                            </label>
                            <label class="option-widget" :class="{ 'selected': inputMethod === 'manual' }" @click="inputMethod = 'manual'">
                                <input type="radio" name="input_method_choice" id="methodManual" value="manual" x-model="inputMethod">
                                <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" /></svg>
                                <span class="widget-title">Manual Input</span>
                                <span class="widget-description">Enter title, content, and optionally upload visuals.</span>
                            </label>
                        </div>
                         {% if form.topic.errors %}
                             <div class="invalid-feedback d-block mt-2">
                                {% for error in form.topic.errors %}<span>{{ error }}</span><br>{% endfor %}
                             </div>
                         {% endif %}
                    </div>

                    {# --- Step 2: Number of Slides --- #}
                    <div class="form-section">
                        <div class="form-section-header">Step 2: Number of Slides</div>
                        <div class="mb-3" style="max-width: 200px;">
                            {{ form.slide_count.label(class="form-label") }}
                            {{ form.slide_count(class="w-input" + (" is-invalid" if form.slide_count.errors else ""), type="number", **{'x-model.number': 'slideCount', '@change': 'currentManualSlideIndex = Math.min(currentManualSlideIndex, slideIndices.length || 1)'}) }}
                            {% if form.slide_count.errors %}
                                <div class="invalid-feedback"> {% for error in form.slide_count.errors %}<span>{{ error }}</span>{% endfor %} </div>
                            {% endif %}
                            <div class="form-text">Total slides (1-50).</div>
                        </div>
                    </div>

                    {# --- Step 3: Content Details --- #}
                    <div class="form-section">
                        <div class="form-section-header">Step 3: Content Details</div>
                         <div class="mb-3">
                            {{ form.presenter_name.label(class="form-label") }}
                            {{ form.presenter_name(class="w-input" + (" is-invalid" if form.presenter_name.errors else "")) }}
                            {% if form.presenter_name.errors %}
                                <div class="invalid-feedback"> {% for error in form.presenter_name.errors %}<span>{{ error }}</span>{% endfor %} </div>
                            {% endif %}
                            <div class="form-text">Optional. Will be added below the title on the first slide.</div>
                        </div>
                        <hr style="border-color: var(--theme-input-border); margin: 1.5rem 0;">
                        <div x-show="inputMethod === 'auto'" x-transition.opacity.duration.300ms>
                             <div class="mb-3">
                                {{ form.topic.label(class="form-label") }}
                                {{ form.topic(class="w-input" + (" is-invalid" if form.topic.errors else ""), placeholder="e.g., The Future of Renewable Energy", **{'x-bind:required': "inputMethod === 'auto'"}) }}
                                <div class="form-text">Required for Automatic Generation. AI will generate coherent, factual content based on this.</div>
                            </div>
                             <div class="mb-3">
                                <label class="form-label">Text Content Style (for AI Generation)</label>
                                 {% if form.text_style.errors %}
                                    <div class="text-danger small mb-2"> {% for error in form.text_style.errors %}<span>{{ error }}</span>{% endfor %} </div>
                                 {% endif %}
                                <div class="widget-selection-container">
                                    {% for subfield in form.text_style %}
                                    <label class="option-widget" :class="{ 'selected': textStyle === '{{ subfield.data }}' }" @click="textStyle = '{{ subfield.data }}'; document.getElementById('{{ subfield.id }}').checked = true;">
                                        {{ subfield(id=subfield.id, **{'x-model': 'textStyle'}) }}
                                        {% if subfield.data == 'bullet' %} <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                                        {% elif subfield.data == 'paragraph' %} <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg>
                                        {% endif %}
                                        <span class="widget-title">{{ subfield.label.text }}</span>
                                        {% if subfield.data == 'bullet' %} <span class="widget-description">AI generates concise, informative bullet points.</span>
                                        {% elif subfield.data == 'paragraph' %} <span class="widget-description">AI generates detailed, flowing paragraphs.</span>
                                        {% endif %}
                                    </label>
                                    {% endfor %}
                                </div>
                                <div class="form-text">Choose how the AI should structure the text content (required for Auto).</div>
                             </div>
                        </div>
                        <div x-show="inputMethod === 'manual'" x-transition.opacity.duration.300ms>
                             <div class="form-text mb-3">Enter title and content. Uploading a visual is optional (AI will generate if blank or no image uploaded).</div>
                             <div class="manual-slides-container">
                                 <template x-for="index in slideIndices" :key="index">
                                     <div class="manual-slide-input-group" x-show="index === currentManualSlideIndex"
                                          x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100"
                                          x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-95">
                                         <div class="manual-slide-header" x-text="'Slide ' + index"></div>
                                         <div class="mb-3">
                                             <label :for="'manual_title_' + index" class="form-label">Slide Title</label>
                                             <input type="text" :name="'manual_title_' + index" :id="'manual_title_' + index" class="manual-input w-input" placeholder="Enter slide title" required>
                                             <div class="invalid-feedback" x-show="!$el.value && $el.form.submitted">Title is required.</div>
                                         </div>
                                         <div class="mb-3" x-show="index > 1">
                                             <label :for="'manual_content_' + index" class="form-label">Slide Content (Optional)</label>
                                             <textarea :name="'manual_content_' + index" :id="'manual_content_' + index" class="manual-input w-input" rows="4" placeholder="Enter slide content (or leave blank for AI generation)"></textarea>
                                             <div class="form-text">Use new lines for bullet points. If left blank, AI will generate content based on the title using the style selected below.</div>
                                         </div>
                                         <div class="form-text" x-show="index === 1"> Content for the first slide is automatically set (Title + Optional Presenter Name). </div>
                                         <div class="mb-3">
                                             <label :for="'manual_image_' + index" class="form-label">Upload Visual (Optional)</label>
                                             <input type="file" :name="'manual_image_' + index" :id="'manual_image_' + index" class="manual-input w-input" accept="image/*">
                                             <div class="form-text">If you upload an image, AI generation for this slide's visual will be skipped.</div>
                                         </div>
                                     </div>
                                 </template>
                             </div>
                             <div class="manual-slide-navigation" x-show="slideIndices.length > 0">
                                 <button type="button" @click="prevManualSlide()" :disabled="currentManualSlideIndex === 1" class="manual-slide-nav-button">
                                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" /></svg> Previous
                                 </button>
                                 <span class="slide-indicator"> Slide <span x-text="currentManualSlideIndex"></span> of <span x-text="slideIndices.length"></span> </span>
                                 <button type="button" @click="nextManualSlide()" :disabled="currentManualSlideIndex === slideIndices.length" class="manual-slide-nav-button">
                                      Next <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>
                                 </button>
                             </div>
                             <div x-show="slideCount <= 0" class="alert alert-warning mt-3"> Please enter a valid number of slides (1-50) in Step 2 to add manual content. </div>
                             <div class="mt-4 pt-3 border-top" style="border-color: var(--theme-input-border) !important;">
                                <label class="form-label">AI Content Style (if content left blank)</label>
                                <div class="widget-selection-container">
                                    {% for subfield in form.text_style %}
                                    <label class="option-widget" :class="{ 'selected': textStyle === '{{ subfield.data }}' }" @click="textStyle = '{{ subfield.data }}'; document.getElementById('manual_{{ subfield.id }}').checked = true;">
                                        <input type="radio" name="manual_text_style" value="{{ subfield.data }}" :id="'manual_{{ subfield.id }}'" x-model="textStyle">
                                         {% if subfield.data == 'bullet' %} <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                                         {% elif subfield.data == 'paragraph' %} <svg class="widget-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg>
                                         {% endif %}
                                        <span class="widget-title">{{ subfield.label.text }}</span>
                                        {% if subfield.data == 'bullet' %} <span class="widget-description">AI generates bullet points.</span>
                                        {% elif subfield.data == 'paragraph' %} <span class="widget-description">AI generates paragraphs.</span>
                                        {% endif %}
                                    </label>
                                    {% endfor %}
                                </div>
                                 <div class="form-text">Choose the format AI should use if you leave slide content fields blank (for slides 2+).</div>
                             </div>
                        </div>
                    </div>

                    {# --- Step 4: Font & Creativity --- #}
                    <div class="form-section">
                        <div class="form-section-header">Step 4: Font & Creativity</div>
                        <div class="mb-3">
                            {{ form.font_choice.label(class="form-label") }}
                            {{ form.font_choice(class="w-select" + (" is-invalid" if form.font_choice.errors else "")) }}
                            {% if form.font_choice.errors %}
                                <div class="invalid-feedback"> {% for error in form.font_choice.errors %}<span>{{ error }}</span>{% endfor %} </div>
                            {% endif %}
                            <div class="form-text">Select the primary font for text within the slide visuals.</div>
                        </div>
                        <div class="mb-3">
                             {{ form.creativity_score.label(class="form-label") }}
                             <div class="creativity-slider-container">
                                {{ form.creativity_score() }}
                                <span class="creativity-slider-value" x-text="creativityValue"></span>
                             </div>
                             {% if form.creativity_score.errors %}
                                 <div class="invalid-feedback"> {% for error in form.creativity_score.errors %}<span>{{ error }}</span>{% endfor %} </div>
                             {% endif %}
                             <div class="form-text">1=Standard Layout, 10=Highly Artistic/Abstract. Affects visual interpretation and layout.</div>
                        </div>
                    </div>

                    {# --- Step 5: Visual Theme --- #}
                    <div class="form-section">
                        <div class="form-section-header">Step 5: Visual Theme</div>
                        <div>
                             <label class="form-label">Visual Theme</label>
                             {% if form.style_choice.errors %}
                                <div class="text-danger small mb-2"> {% for error in form.style_choice.errors %}<span>{{ error }}</span>{% endfor %} </div>
                             {% endif %}
                             <div class="widget-selection-container theme-grid">
                                {% for value, label in form.style_choice.choices %}
                                    {% if value != 'custom' %}
                                    <label class="option-widget theme-widget" :class="{ 'selected': styleChoice === '{{ value }}' }" @click="styleChoice = '{{ value }}'; document.getElementById('style_choice_{{ loop.index0 }}').checked = true;">
                                        <input type="radio" name="{{ form.style_choice.name }}" value="{{ value }}" id="style_choice_{{ loop.index0 }}" x-model="styleChoice">
                                        <div class="theme-preview-image-container">
                                            <img src="https://placehold.co/300x200/1E293B/94A3B8?text={{ label | urlencode }}" alt="{{ label }} Preview" loading="lazy">
                                        </div>
                                        <span class="widget-title">{{ label }}</span>
                                    </label>
                                    {% endif %}
                                {% endfor %}
                                <label class="option-widget theme-widget" :class="{ 'selected': styleChoice === 'custom' }" @click="styleChoice = 'custom'; document.getElementById('style_choice_custom').checked = true;">
                                     <input type="radio" name="{{ form.style_choice.name }}" value="custom" id="style_choice_custom" x-model="styleChoice">
                                     <div class="theme-preview-image-container" style="display: flex; align-items: center; justify-content: center;">
                                         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 40px; height: 40px; color: var(--theme-text-secondary);"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z" /></svg>
                                     </div>
                                     <span class="widget-title">Custom Prompt...</span>
                                </label>
                             </div>
                             <div class="theme-swiper-container">
                                <div class="theme-grid-mobile-swiper">
                                    {% for value, label in form.style_choice.choices %}
                                        {% if value != 'custom' %}
                                        <label class="option-widget theme-widget" :class="{ 'selected': styleChoice === '{{ value }}' }" @click="styleChoice = '{{ value }}'; document.getElementById('style_choice_mobile_{{ loop.index0 }}').checked = true;">
                                            <input type="radio" name="{{ form.style_choice.name }}" value="{{ value }}" id="style_choice_mobile_{{ loop.index0 }}" x-model="styleChoice">
                                            <div class="theme-preview-image-container">
                                                <img src="https://placehold.co/300x200/1E293B/94A3B8?text={{ label | urlencode }}" alt="{{ label }} Preview" loading="lazy">
                                            </div>
                                            <span class="widget-title">{{ label }}</span>
                                        </label>
                                        {% endif %}
                                    {% endfor %}
                                    <label class="option-widget theme-widget" :class="{ 'selected': styleChoice === 'custom' }" @click="styleChoice = 'custom'; document.getElementById('style_choice_mobile_custom').checked = true;">
                                         <input type="radio" name="{{ form.style_choice.name }}" value="custom" id="style_choice_mobile_custom" x-model="styleChoice">
                                         <div class="theme-preview-image-container" style="display: flex; align-items: center; justify-content: center;">
                                             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 40px; height: 40px; color: var(--theme-text-secondary);"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z" /></svg>
                                         </div>
                                         <span class="widget-title">Custom Prompt...</span>
                                    </label>
                                </div>
                             </div>
                             <div class="form-text">Select a predefined theme or choose 'Custom' to write your own prompt below.</div>
                             <div class="mt-3" x-show="styleChoice === 'custom'" x-transition.opacity.duration.300ms>
                                {{ form.custom_style_prompt.label(class="form-label") }}
                                {{ form.custom_style_prompt(class="w-input" + (" is-invalid" if form.custom_style_prompt.errors else ""), **{'x-bind:required': "styleChoice === 'custom'"}) }}
                                 {% if form.custom_style_prompt.errors %}
                                    <div class="invalid-feedback"> {% for error in form.custom_style_prompt.errors %}<span>{{ error }}</span>{% endfor %} </div>
                                 {% endif %}
                                 <div class="form-text">Describe the visual theme (required if 'Custom' is selected).</div>
                             </div>
                        </div>
                    </div>

                    {# --- Step 6: Generate --- #}
                    <div class="mt-4">
                         <button type="submit" class="btn-submit-gradient" id="submit-button">
                             <span id="submit-button-text"> Generate Presentation</span>
                             <span id="submit-spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"></span>
                         </button>
                    </div>

                </form>
            </div> {# End Alpine x-data scope #}

          </div> {# End container-large #}
        </div> {# End padding-global #}
      </div> {# End create-section #}
    </div> {# End main-wrapper #}

    {# Footer - Copied from original file #}
    <div class="section-footer"> <div class="padding-global"> <div class="container-large"> <div class="footer-component"> <div class="w-layout-grid footer-grid"> <div class="footer-link-wrapper"> <div>Home page</div> <div class="footer-link-item"> <a href="{{ url_for('main.index') }}" class="footer-link">Home</a> <a href="{{ url_for('main.about') }}" class="footer-link">About</a> <a href="{{ url_for('main.contact') }}" class="footer-link">Contact</a> <a href="#" class="footer-link">Blog</a> <a href="#" class="footer-link">Team</a> </div> </div> <div id="w-node-_70a0d6c5-6e90-caf5-75c2-74efbb9851bb-bb9851a8" class="footer-link-wrapper"> <div>Inner page</div> <div class="footer-link-item"> <a href="{{ url_for('main.features') }}" class="footer-link">Feature</a> <a href="#" class="footer-link">Blog details</a> <a href="#" class="footer-link">Team details</a> <a href="{{ url_for('main.pricing') }}" class="footer-link">Prices</a> <a href="{{ url_for('main.register') }}" class="footer-link">Sign Up</a> </div> </div> <div id="w-node-_70a0d6c5-6e90-caf5-75c2-74efbb9851c9-bb9851a8" class="footer-link-wrapper"> <div>Authentication page</div> <div class="footer-link-item"> <a href="{{ url_for('main.login') }}" class="footer-link">Login</a> <a href="#" class="footer-link">Forgot password</a> <a href="#" class="footer-link">Confirm email</a> <a href="#" class="footer-link">Terms &amp; Condition</a> <a href="#" class="footer-link">Privacy Policy</a> </div> </div> <div id="w-node-_70a0d6c5-6e90-caf5-75c2-74efbb9851d7-bb9851a8" class="footer-link-wrapper"> <div>Utility page</div> <div class="footer-link-item"> <a href="#" class="footer-link">Style guide</a> <a href="#" class="footer-link">Licenses</a> <a href="https://rentnex.webflow.io/404" class="footer-link">404 not found</a> <a href="https://rentnex.webflow.io/401" class="footer-link">Password protected</a> <a href="#" class="footer-link">Changelog</a> </div> </div> <div id="w-node-_70a0d6c5-6e90-caf5-75c2-74efbb9851e5-bb9851a8" class="footer-link-item _2nd"> <div>Subscribe</div> <div class="footer-from-block w-form"> <form id="email-form-footer" name="email-form-footer" method="post" class="footer-from"> <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/> <input class="footer-input w-input" maxlength="256" name="email-subscribe-footer" placeholder="Enter your email" type="email" required=""> <button type="submit" class="button-stroke w-inline-block"> <div class="button"><img loading="lazy" src="{{ url_for('static', filename='images/Button-Bg.png') }}" alt="" class="button-bg-icon"> <div class="button-text">Submit</div> </div> </button> </form> <div class="success-message w-form-done"> <div class="text-block">Thank you!</div> </div> <div class="error-message w-form-fail"> <div>Oops! Error.</div> </div> </div> </div> </div> <div class="padding-bottom padding-xlarge"></div> <div class="footer-line"></div> <div class="padding-bottom padding-medium"></div> <div class="footer-bottom-content-wrapper"> <div class="website-link-wrapper">&copy; {{ now.year }} SlideaAI</div> <div class="footer-social-link-wrapper"> <a href="https://www.instagram.com/" target="_blank" class="footer-social-link w-inline-block"><img src="{{ url_for('static', filename='images/Instagram.svg') }}" loading="lazy" alt="Instagram" class="footer-social-icon"></a> <a href="https://x.com" target="_blank" class="footer-social-link w-inline-block"><img src="{{ url_for('static', filename='images/Twitter.svg') }}" loading="lazy" alt="Twitter" class="footer-social-icon"></a> <a href="https://www.facebook.com/" target="_blank" class="footer-social-link w-inline-block"><img src="{{ url_for('static', filename='images/Facebook.svg') }}" loading="lazy" alt="Facebook" class="footer-social-icon"></a> </div> <div id="w-node-_70a0d6c5-6e90-caf5-75c2-74efbb9851ff-bb9851a8" class="website-link-wrapper">Powered by <a href="https://webflow.com/" target="_blank" class="website-link">Viterno Group</a></div> </div> </div> </div> </div> </div>
  </div>
  <div class="w-embed"></div>

  {# JS Includes #}
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=67f1d16c9fcb04b14e6074f2" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/webflow.js') }}" type="text/javascript"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  {# Bootstrap JS for alert dismissal #}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  {# JS for Fade-in & Submit Button State #}
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.body.classList.add('loaded'); // Apply fade-in

      // Optional fade-out (same as before)
      const links = document.querySelectorAll('a:not([target="_blank"]):not([href^="#"])');
      links.forEach(link => { link.addEventListener('click', function(e) { const href = this.getAttribute('href'); if (href && !href.startsWith('mailto:') && !href.startsWith('tel:') && !this.closest('form')) { e.preventDefault(); document.body.style.opacity = 0; setTimeout(() => { window.location.href = href; }, 500); } }); });

       // JS to dismiss flash messages (uses Bootstrap JS now)
       const alertContainer = document.querySelector('.container-large'); // Target container where flash messages might appear
       if (alertContainer) {
           const alerts = alertContainer.querySelectorAll('.alert');
           alerts.forEach(function(alert) {
               // Auto-dismiss after 5 seconds
               setTimeout(() => {
                   if (typeof bootstrap !== 'undefined' && bootstrap.Alert) {
                       const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
                       if (bsAlert) { bsAlert.close(); }
                   } else { // Fallback if Bootstrap JS isn't loaded
                       alert.style.opacity = '0';
                       setTimeout(() => alert.remove(), 150);
                   }
               }, 5000); // 5 seconds
           });
       }

        // Submit button processing state (Updated validation logic)
        const form = document.getElementById('create-presentation-form');
        const submitButton = document.getElementById('submit-button');
        const submitButtonText = document.getElementById('submit-button-text');
        const submitSpinner = document.getElementById('submit-spinner');

        if (form && submitButton && submitButtonText && submitSpinner) {
            form.addEventListener('submit', function(event) {
                form.submitted = true; // Add 'submitted' flag for Alpine validation display
                let isValid = true;
                const inputMethodRadio = document.querySelector('input[name="input_method_choice"]:checked');
                const inputMethod = inputMethodRadio ? inputMethodRadio.value : 'auto';

                // Client-side validation checks... (same as before)
                if (inputMethod === 'auto') {
                    const topicInput = document.getElementById('topic');
                    const textStyleRadio = document.querySelector('input[name="text_style"]:checked');
                    if (!topicInput || !topicInput.value.trim()) { isValid = false; topicInput?.classList.add('is-invalid'); } else { topicInput?.classList.remove('is-invalid'); }
                    // Text style is required via WTForms, no JS check needed here
                } else if (inputMethod === 'manual') {
                    const slideCountInput = document.getElementById('slide_count');
                    const slideCount = parseInt(slideCountInput?.value) || 0;
                    if (slideCount <= 0) { isValid = false; slideCountInput?.classList.add('is-invalid'); } else {
                        slideCountInput?.classList.remove('is-invalid');
                        for (let i = 1; i <= slideCount; i++) {
                            const titleInput = document.getElementById(`manual_title_${i}`);
                            if (!titleInput || !titleInput.value.trim()) { isValid = false; titleInput?.classList.add('is-invalid'); } else { titleInput?.classList.remove('is-invalid'); }
                        }
                    }
                }
                const slideCountInput = document.getElementById('slide_count');
                if (!slideCountInput || !slideCountInput.value || slideCountInput.value < 1 || slideCountInput.value > 50) { isValid = false; slideCountInput?.classList.add('is-invalid'); } else { slideCountInput?.classList.remove('is-invalid'); }
                const selectedStyleRadio = document.querySelector('input[name="style_choice"]:checked');
                const customStyleInput = document.getElementById('custom_style_prompt');
                if (selectedStyleRadio && selectedStyleRadio.value === 'custom' && (!customStyleInput || !customStyleInput.value.trim())) { isValid = false; customStyleInput?.classList.add('is-invalid'); } else { customStyleInput?.classList.remove('is-invalid'); }

                // Update button state or prevent submission
                if(isValid) {
                    submitButton.disabled = true;
                    submitButtonText.textContent = 'Generating...';
                    submitSpinner.style.display = 'inline-block';
                } else {
                     event.preventDefault();
                     console.log("Client-side check failed, form not submitted.");
                     const firstInvalid = form.querySelector('.is-invalid, .text-danger');
                     firstInvalid?.focus();
                     firstInvalid?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        }

    });
  </script>
</body>
</html>
